<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Shaka Packager SDK: shaka::media::MuxerListener Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Shaka Packager SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d8/daf/namespaceshaka.html">shaka</a></li><li class="navelem"><b>media</b></li><li class="navelem"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html">MuxerListener</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d2/d11/classshaka_1_1media_1_1MuxerListener-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">shaka::media::MuxerListener Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../de/dfa/muxer__listener_8h_source.html">muxer_listener.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for shaka::media::MuxerListener:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.png" usemap="#shaka::media::MuxerListener_map" alt=""/>
  <map id="shaka::media::MuxerListener_map" name="shaka::media::MuxerListener_map">
<area href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html" alt="shaka::media::CombinedMuxerListener" shape="rect" coords="0,56,282,80"/>
<area href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html" title="MuxerListener that uses HlsNotifier." alt="shaka::media::HlsNotifyMuxerListener" shape="rect" coords="292,56,574,80"/>
<area href="../../dc/d73/classshaka_1_1media_1_1MockMuxerListener.html" alt="shaka::media::MockMuxerListener" shape="rect" coords="584,56,866,80"/>
<area href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html" alt="shaka::media::MpdNotifyMuxerListener" shape="rect" coords="876,56,1158,80"/>
<area href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html" alt="shaka::media::VodMediaInfoDumpMuxerListener" shape="rect" coords="1168,56,1450,80"/>
<area href="../../d9/d44/classshaka_1_1media_1_1MultiCodecMuxerListener.html" alt="shaka::media::MultiCodecMuxerListener" shape="rect" coords="0,112,282,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d03/structshaka_1_1media_1_1MuxerListener_1_1MediaRanges.html">MediaRanges</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a6e15ef9264cd3edbfef748d626dd91ae"><td class="memItemLeft" align="right" valign="top"><a id="a6e15ef9264cd3edbfef748d626dd91ae"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>ContainerType</b> { <br />
&#160;&#160;<b>kContainerUnknown</b> = 0, 
<b>kContainerMp4</b>, 
<b>kContainerMpeg2ts</b>, 
<b>kContainerWebM</b>, 
<br />
&#160;&#160;<b>kContainerText</b>, 
<b>kContainerPackedAudio</b>
<br />
 }</td></tr>
<tr class="separator:a6e15ef9264cd3edbfef748d626dd91ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab521acca727bbe01aa15c751325c0001"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#ab521acca727bbe01aa15c751325c0001">OnEncryptionInfoReady</a> (bool is_initial_encryption_info, FourCC protection_scheme, const std::vector&lt; uint8_t &gt; &amp;key_id, const std::vector&lt; uint8_t &gt; &amp;iv, const std::vector&lt; <a class="el" href="../../d0/d86/structshaka_1_1media_1_1ProtectionSystemSpecificInfo.html">ProtectionSystemSpecificInfo</a> &gt; &amp;key_system_info)=0</td></tr>
<tr class="separator:ab521acca727bbe01aa15c751325c0001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a897463091f0effa647a8e2822f48b2ee"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a897463091f0effa647a8e2822f48b2ee">OnEncryptionStart</a> ()=0</td></tr>
<tr class="separator:a897463091f0effa647a8e2822f48b2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5073c56728be37c32d7734439f4062c5"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a5073c56728be37c32d7734439f4062c5">OnMediaStart</a> (const <a class="el" href="../../d0/d27/structshaka_1_1media_1_1MuxerOptions.html">MuxerOptions</a> &amp;muxer_options, const <a class="el" href="../../d5/db1/classshaka_1_1media_1_1StreamInfo.html">StreamInfo</a> &amp;stream_info, int32_t time_scale, ContainerType container_type)=0</td></tr>
<tr class="separator:a5073c56728be37c32d7734439f4062c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ee7aa04ab8fd1bbf2fcafc75d56abfb"><td class="memItemLeft" align="right" valign="top"><a id="a1ee7aa04ab8fd1bbf2fcafc75d56abfb"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a1ee7aa04ab8fd1bbf2fcafc75d56abfb">OnAvailabilityOffsetReady</a> ()</td></tr>
<tr class="memdesc:a1ee7aa04ab8fd1bbf2fcafc75d56abfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when LL-DASH streaming starts. <br /></td></tr>
<tr class="separator:a1ee7aa04ab8fd1bbf2fcafc75d56abfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa29d356ffd3a1639ab88e0ad97968135"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#aa29d356ffd3a1639ab88e0ad97968135">OnSampleDurationReady</a> (int32_t sample_duration)=0</td></tr>
<tr class="separator:aa29d356ffd3a1639ab88e0ad97968135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a544c78e01d916f63838f1c86446d1ea2"><td class="memItemLeft" align="right" valign="top"><a id="a544c78e01d916f63838f1c86446d1ea2"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a544c78e01d916f63838f1c86446d1ea2">OnSegmentDurationReady</a> ()</td></tr>
<tr class="memdesc:a544c78e01d916f63838f1c86446d1ea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when LL-DASH streaming starts. <br /></td></tr>
<tr class="separator:a544c78e01d916f63838f1c86446d1ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d4301cd53ab421f524bfa143eac21a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a11d4301cd53ab421f524bfa143eac21a">OnMediaEnd</a> (const <a class="el" href="../../d1/d03/structshaka_1_1media_1_1MuxerListener_1_1MediaRanges.html">MediaRanges</a> &amp;media_ranges, float duration_seconds)=0</td></tr>
<tr class="separator:a11d4301cd53ab421f524bfa143eac21a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf755e05c40fdadcca6113164f0585c6"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#aaf755e05c40fdadcca6113164f0585c6">OnNewSegment</a> (const std::string &amp;segment_name, int64_t start_time, int64_t duration, uint64_t segment_file_size)=0</td></tr>
<tr class="separator:aaf755e05c40fdadcca6113164f0585c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1a3f7c2c4f478bed80531f90eadb31"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a3f1a3f7c2c4f478bed80531f90eadb31">OnCompletedSegment</a> (int64_t duration, uint64_t segment_file_size)</td></tr>
<tr class="separator:a3f1a3f7c2c4f478bed80531f90eadb31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7b35913ba90256e567085af1649138"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#ade7b35913ba90256e567085af1649138">OnKeyFrame</a> (int64_t timestamp, uint64_t start_byte_offset, uint64_t size)=0</td></tr>
<tr class="separator:ade7b35913ba90256e567085af1649138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d6d113d7a0b58fffc1abac99013757"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#aa9d6d113d7a0b58fffc1abac99013757">OnCueEvent</a> (int64_t timestamp, const std::string &amp;cue_data)=0</td></tr>
<tr class="separator:aa9d6d113d7a0b58fffc1abac99013757"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html">MuxerListener</a> is an event handler that can be registered to a muxer. A <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html">MuxerListener</a> cannot be shared amongst muxer instances, in other words, every muxer instance either owns a unique <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html">MuxerListener</a> instance. This also assumes that there is one media stream per muxer. </p>

<p class="definition">Definition at line <a class="el" href="../../de/dfa/muxer__listener_8h_source.html#l00032">32</a> of file <a class="el" href="../../de/dfa/muxer__listener_8h_source.html">muxer_listener.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3f1a3f7c2c4f478bed80531f90eadb31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f1a3f7c2c4f478bed80531f90eadb31">&#9670;&nbsp;</a></span>OnCompletedSegment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnCompletedSegment </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>segment_file_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a segment has been muxed and the entire file has been written. For Low Latency only. Note that it should be called after OnNewSegment. When the low latency segment is initally added to the manifest, the size and duration are not known, because the segment is still being processed. This will update the segment's duration and size after the segment is fully written and these values are known. </p>

<p>Reimplemented in <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#a52ef58b3785911c95cfa959008118ab8">shaka::media::MpdNotifyMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a1c347ee8debc05dadf4d880a6507cecc">shaka::media::CombinedMuxerListener</a>.</p>

<p class="definition">Definition at line <a class="el" href="../../de/dfa/muxer__listener_8h_source.html#l00146">146</a> of file <a class="el" href="../../de/dfa/muxer__listener_8h_source.html">muxer_listener.h</a>.</p>

</div>
</div>
<a id="aa9d6d113d7a0b58fffc1abac99013757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9d6d113d7a0b58fffc1abac99013757">&#9670;&nbsp;</a></span>OnCueEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnCueEvent </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cue_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when there is a new Ad Cue, which should align with (sub)segments. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestamp</td><td>indicate the cue timestamp. </td></tr>
    <tr><td class="paramname">cue_data</td><td>is the data of the cue. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#a63f5e613bba435a8496d48d87ea66505">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#a1837b4ff54c1eef191448c49bb3ccc56">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#aec15d878b48b81b4aafd8e7f8a059613">shaka::media::VodMediaInfoDumpMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a6d4c96d42b1fb17b4b1194dd7d584956">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<a id="ab521acca727bbe01aa15c751325c0001"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab521acca727bbe01aa15c751325c0001">&#9670;&nbsp;</a></span>OnEncryptionInfoReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnEncryptionInfoReady </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_initial_encryption_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FourCC&#160;</td>
          <td class="paramname"><em>protection_scheme</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>key_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>iv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../d0/d86/structshaka_1_1media_1_1ProtectionSystemSpecificInfo.html">ProtectionSystemSpecificInfo</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>key_system_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the media's encryption information is ready. OnEncryptionInfoReady with <em>initial_encryption_info</em> being true should be called before <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a5073c56728be37c32d7734439f4062c5">OnMediaStart()</a>, if the media is encrypted. All the parameters may be empty just to notify that the media is encrypted. For ISO BMFF (MP4) media: If <em>is_initial_encryption_info</em> is true then <em>key_id</em> is the default_KID in 'tenc' box. If <em>is_initial_encryption_info</em> is false then <em>key_id</em> is the new key ID for the for the next crypto period. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_initial_encryption_info</td><td>is true if this is the first encryption info for the media. In general, this flag should always be true for non-key-rotated media and should be called only once. </td></tr>
    <tr><td class="paramname">protection_scheme</td><td>specifies the protection scheme: 'cenc', 'cens', 'cbc1', 'cbcs'. </td></tr>
    <tr><td class="paramname">key_id</td><td>is the key ID for the media. The format should be a vector of uint8_t, i.e. not (necessarily) human readable hex string. </td></tr>
    <tr><td class="paramname">iv</td><td>is the initialization vector. For most cases this should be 16 bytes, but whether the input is accepted is up to the implementation. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#a8be7a524212bdd401150aa6bcb374792">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#a10071445982f736bb1e6e04133dd60cb">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a445b97bf06c20a44ae5d0fef926cbd9f">shaka::media::CombinedMuxerListener</a>, and <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#a683882564ac762e2e94795964f8be4b8">shaka::media::VodMediaInfoDumpMuxerListener</a>.</p>

</div>
</div>
<a id="a897463091f0effa647a8e2822f48b2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a897463091f0effa647a8e2822f48b2ee">&#9670;&nbsp;</a></span>OnEncryptionStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnEncryptionStart </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the muxer starts encrypting the segments. Further segments notified via <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#aaf755e05c40fdadcca6113164f0585c6">OnNewSegment()</a> are encrypted. This may be called more than once e.g. per segment, but the semantics does not change. </p>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#a49b4187f39abe517768364f7ecb280f9">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#a56ccf04196458894f31d0db102153334">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#ae8f6f65fbab9f301be5bb35f5b8d1cbc">shaka::media::VodMediaInfoDumpMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a40a2b9e923b6a6e255ee5632bffc1134">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<a id="ade7b35913ba90256e567085af1649138"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7b35913ba90256e567085af1649138">&#9670;&nbsp;</a></span>OnKeyFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnKeyFrame </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>timestamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>start_byte_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when there is a new key frame. For Video only. Note that it should be called before OnNewSegment is called on the containing segment. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestamp</td><td>is in terms of the timescale of the media. </td></tr>
    <tr><td class="paramname">start_byte_offset</td><td>is the offset of where the key frame starts. </td></tr>
    <tr><td class="paramname">size</td><td>is size in bytes. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#a54f410c06f0f8eb9bbb6c9930c6aefa4">shaka::media::VodMediaInfoDumpMuxerListener</a>, <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#a939b705752c295745cc076a20977c731">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#af18042e753bda8897128b0e091cf9999">shaka::media::MpdNotifyMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a24b45b02ae133efedace054329469058">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<a id="a11d4301cd53ab421f524bfa143eac21a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d4301cd53ab421f524bfa143eac21a">&#9670;&nbsp;</a></span>OnMediaEnd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnMediaEnd </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/d03/structshaka_1_1media_1_1MuxerListener_1_1MediaRanges.html">MediaRanges</a> &amp;&#160;</td>
          <td class="paramname"><em>media_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>duration_seconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when all files are written out and the muxer object does not output any more files. Note: This event might not be very interesting to MPEG DASH Live profile. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">media_ranges</td><td>is the ranges of the media file. It should have ranges for the entire file, using which the file size can be calculated. </td></tr>
    <tr><td class="paramname">duration_seconds</td><td>is the length of the media in seconds. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../dc/d73/classshaka_1_1media_1_1MockMuxerListener.html#a915fc76c19622d7e82aa74dd996edacd">shaka::media::MockMuxerListener</a>, <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#aa2af080963ca02454786b8bb2ff6dd6d">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#aa42f5472d5450d897f036ff582a31612">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#ab2ab9bc34256f8016f0e827097b97ca1">shaka::media::VodMediaInfoDumpMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#aaf16580970d5e65d33c80cb9e8a57651">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<a id="a5073c56728be37c32d7734439f4062c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5073c56728be37c32d7734439f4062c5">&#9670;&nbsp;</a></span>OnMediaStart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnMediaStart </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/d27/structshaka_1_1media_1_1MuxerOptions.html">MuxerOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>muxer_options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d5/db1/classshaka_1_1media_1_1StreamInfo.html">StreamInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>stream_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>time_scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ContainerType&#160;</td>
          <td class="paramname"><em>container_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when muxing starts. For MPEG DASH Live profile, the initialization segment information is available from <a class="el" href="../../d5/db1/classshaka_1_1media_1_1StreamInfo.html" title="Abstract class holds stream information.">StreamInfo</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">muxer_options</td><td>is the options for <a class="el" href="../../df/d46/classshaka_1_1media_1_1Muxer.html">Muxer</a>. </td></tr>
    <tr><td class="paramname">stream_info</td><td>is the information of this media. </td></tr>
    <tr><td class="paramname">time_scale</td><td>is a reference time scale that overrides the time scale specified in <em>stream_info</em>. </td></tr>
    <tr><td class="paramname">container_type</td><td>is the container of this media. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#accffa37161da12f07d15f8350f619b7d">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#aa1563eef2eb41723d614b659f37ac9f0">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#aa58548a1bfdfd7827dfe84752bba0fba">shaka::media::VodMediaInfoDumpMuxerListener</a>, <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#a41a3db8b5fc01846c5f60f48223a15a0">shaka::media::CombinedMuxerListener</a>, and <a class="el" href="../../d9/d44/classshaka_1_1media_1_1MultiCodecMuxerListener.html#a1d019803abca379232c060d8e004327d">shaka::media::MultiCodecMuxerListener</a>.</p>

</div>
</div>
<a id="aaf755e05c40fdadcca6113164f0585c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf755e05c40fdadcca6113164f0585c6">&#9670;&nbsp;</a></span>OnNewSegment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnNewSegment </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>segment_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>start_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>segment_file_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a segment has been muxed and the file has been written. Note: For some implementations, this is used to signal new subsegments or chunks. For example, for generating video on demand (VOD) MPD manifest, this is called to signal subsegments. In the low latency case, this indicates the start of a new segment and will contain info about the segment's first chunk. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">segment_name</td><td>is the name of the new segment. Note that some implementations may not require this, e.g. if this is a subsegment. </td></tr>
    <tr><td class="paramname">start_time</td><td>is the start time of the segment, relative to the timescale specified by MediaInfo passed to <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a5073c56728be37c32d7734439f4062c5">OnMediaStart()</a>. </td></tr>
    <tr><td class="paramname">duration</td><td>is the duration of the segment, relative to the timescale specified by MediaInfo passed to <a class="el" href="../../dd/d7a/classshaka_1_1media_1_1MuxerListener.html#a5073c56728be37c32d7734439f4062c5">OnMediaStart()</a>. </td></tr>
    <tr><td class="paramname">segment_file_size</td><td>is the segment size in bytes. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#a90a293a14ff0b63c0b07c7ea8adde59a">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#a5d9681e36de82c75c99631a55863d2fb">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#abea88e872e32c4deaa0b2c54b9fc8c48">shaka::media::VodMediaInfoDumpMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#afb4ac528f1f2650f02450b92b29c0101">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<a id="aa29d356ffd3a1639ab88e0ad97968135"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa29d356ffd3a1639ab88e0ad97968135">&#9670;&nbsp;</a></span>OnSampleDurationReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void shaka::media::MuxerListener::OnSampleDurationReady </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>sample_duration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the average sample duration of the media is determined. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sample_duration</td><td>in timescale of the media. </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="../../d5/dfa/classshaka_1_1media_1_1HlsNotifyMuxerListener.html#aa6bcc73560896bc417efd901428a888f">shaka::media::HlsNotifyMuxerListener</a>, <a class="el" href="../../d9/da5/classshaka_1_1media_1_1MpdNotifyMuxerListener.html#acfa99abf6bddced3dc87dd4496bb496c">shaka::media::MpdNotifyMuxerListener</a>, <a class="el" href="../../db/dd0/classshaka_1_1media_1_1VodMediaInfoDumpMuxerListener.html#a9a6cfb673ace7e6fb8a12db5c5b420b6">shaka::media::VodMediaInfoDumpMuxerListener</a>, and <a class="el" href="../../d9/d68/classshaka_1_1media_1_1CombinedMuxerListener.html#ae10ef338dec2ca1afaf591d8590f3a05">shaka::media::CombinedMuxerListener</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>packager/media/event/<a class="el" href="../../de/dfa/muxer__listener_8h_source.html">muxer_listener.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 3 2022 08:57:15 for Shaka Packager SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
